<!DOCTYPE html>
<html>
	<head>
		<title>Getting started</title>
		<link href="/public/css/view-repository.css" rel="stylesheet" type="text/css">
		<link rel="icon" href="/public/assets/logo.png" type="image/x-icon">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
	</head>
<body>
	<div class="left">
		<!--Top menu -->
		<div class="menu">
			<h1>EpiSafe</h1>
			<ul>
				<li><img class="icon-menu" id="white" src="/public/assets/menu/home-white.png" alt="logo" width="30" height="30"><img class="icon-menu" id="blue" src="/public/assets/menu/home-blue.png" alt="logo" width="30" height="30"><h4>Accueil</h4></li>
				<li><img class="icon-menu" id="white" src="/public/assets/menu/setting-white.png" alt="logo" width="30" height="30"><img class="icon-menu" id="blue" src="/public/assets/menu/setting-blue.png" alt="logo" width="30" height="30"><h4>Paramètres</h4></li>
				<li><img class="icon-menu" id="white" src="/public/assets/menu/about-white.png" alt="logo" width="30" height="30"><img class="icon-menu" id="blue" src="/public/assets/menu/about-blue.png" alt="logo" width="30" height="30"><h4>À propos</h4></li>
			</div>
	</div>
	<div class="right">
		<div class="content">
			<div class="header">
				<h1>Vos répertoires</h1>
				<% const date = new Date(); %>
				<% var options = { timeZone: "Europe/Paris", hour12: false, weekday: 'long', month: 'long', day: 'numeric'};%>
				<h2><%= date.toLocaleString('fr-FR', options);%></h2>
			</div>
			<div class="resumate">
				<div class="resumate-1">
					<h1><%= repo.length %></h1>
					<h2>Nombre de projets</h2>
				</div>
				<div class="resumate-2">
					<h1><%= repo.length %></h1>
					<h2>Nombre de projets</h2>
				</div>
				<div class="resumate-3">
					<h1><%= repo.length %></h1>
					<h2>Nombre de projets</h2>
				</div>
			</div>
			<div class="testout">
				<table class="table-list">
					<tr>
						<th>Id</th>
						<th>Name</th>
						<th>compilation</th>
						<th>tests</th>
						<th>norme</th>
						<th>Début</th>
						<th>Fin</th>
						<th>Statut</th>
					</tr>
					<% repo.forEach(repo => { %>
					<tr>
						<% for (let i = 1; i !== repo.length; i++) { %>
							<% const element = repo[i]; %>
							<td><%= element.id %></td>
							<td><%= element.name %></td>
							<% (element.compilation ? element.compilation = "🟢" : element.compilation = "🔴") %>
							<td><%= element.compilation %></td>
							<% (element.test ? element.test = "🟢" : element.test = "🔴") %>
							<td><%= element.test %></td>
							<% (element.coding_style ? element.coding_style = "🟢" : element.coding_style = "🔴") %>
							<td><%= element.coding_style %></td>
							<td><%= element.start %></td>
							<td><%= element.finish %></td>
							<% if (element.status == '0') { %>
								<td>😁</td>
							<% } else if (element.status == '1') { %>
								<td>🙂</td>
							<% } else if (element.status == '2') { %>
								<td>😕</td>
							<% } else if (element.status == '3') { %>
								<td>😡</td>
							<% } else { %>
								<td>❔</td>
							<% } %>
						<% } %>
					</tr>
				<% }); %>
				</table>
					<div class="info-board">
						<h1>Informations</h1>
						<h3>Dernier commit :</h3>
					</div>
			</div>
		</div>
		<div class="button-bottom">
			<button id="add" onclick="location.href='/add-repository'">Ajouter un répertoire</button>
			<button id="edit" onclick="location.href='/view-repository'">Modifier un repertoire</button>
			<button id="delete" onclick="location.href='/delete-repository'">Supprimer un répertoire</button>
		</div>
	</div>
	<script type="text/javascript">
		document.querySelector(".table-list").addEventListener("click", function(name) {
			if (name.target.parentNode.children[0].innerHTML >= 0) {
				window.location.href = "/view-repository-by-id/" + name.target.parentNode.children[0].innerHTML;
			}
		});
	</script>
</body>
</html>
